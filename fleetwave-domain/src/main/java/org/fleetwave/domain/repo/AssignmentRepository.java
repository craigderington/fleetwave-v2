package org.fleetwave.domain.repo; import org.fleetwave.domain.Assignment; import org.springframework.data.jpa.repository.*; import org.springframework.data.repository.query.Param; import java.time.OffsetDateTime; import java.util.*; public interface AssignmentRepository extends JpaRepository<Assignment, java.util.UUID>{ java.util.Optional<Assignment> findByRadio_IdAndStatus(java.util.UUID radioId, Assignment.Status status); @Query("select a from Assignment a where a.status=org.fleetwave.domain.Assignment$Status.ACTIVE and a.expectedEnd < :now") java.util.List<Assignment> findOverdue(@Param("now") OffsetDateTime now);}