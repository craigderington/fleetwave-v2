<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/layout :: layout (~{::body})"
      th:with="title='Alerts', content=~{::content}">
<body>
<section id="content">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Alerts</h4>
  </div>
  <table class="table table-sm">
    <thead><tr><th>ID</th><th>Rule</th><th>Subject</th><th>Status</th><th>First</th><th>Last</th><th>Count</th><th>Actions</th></tr></thead>
    <tbody>
      <tr th:each="a : ${alerts}">
        <td th:text="${a.id}">id</td>
        <td th:text="${a.rule != null ? a.rule.name : '-'}">rule</td>
        <td th:text="${a.subjectType + ':' + a.subjectId}">subject</td>
        <td th:text="${a.status}">status</td>
        <td th:text="${a.firstSeen}">first</td>
        <td th:text="${a.lastSeen}">last</td>
        <td th:text="${a.count}">count</td>
        <td>
          <form th:action="@{|/api/v1/alerts/${a.id}/ack|}" method="post" class="d-inline">
            <button class="btn btn-sm btn-outline-primary">Ack</button>
          </form>
          <form th:action="@{|/api/v1/alerts/${a.id}/close|}" method="post" class="d-inline">
            <button class="btn btn-sm btn-outline-success">Close</button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>
</section>
</body>
</html>
